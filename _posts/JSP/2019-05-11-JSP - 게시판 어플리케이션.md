---
title:  "JSP/Servlet - 게시판!"

read_time: false
share: false
author_profile: false
classes: wide

categories:
  - JSP

tags:
  - JSP
  - servelt

toc: true

---
![image28]({{ "/assets/jsp/image28.png" | absolute_url }}){: .shadow}  

## 게시판 구축하기

지금까지 인증처리, 간단한 게시판 구축 등을 했는데 이번엔 진짜 회원가입부터 로그인까지 가능한 하나의 완전한 웹 어플리케이션을 만들어보자.  

프로젝트명은 jspPro, board라는 폴더와 패키지 안에 게시판 관련된 파일들을 생성하자.  

우선 DB연결과정은 기존에 있던것을 사용하자.  


`/WEB-INF/lib` 폴더에 `ojdbc6.jar`파일을 넣고 톰캣(WAS)서버가 제공하는 커넥션 풀 객체를 사용하자  

> https://kouzie.github.io/jsp/JSP-DBCP,-세션/

먼저 회원가입 테이블을 생성하자.  

```sql
CREATE TABLE member21 (
    memberid VARCHAR(50) PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    password VARCHAR(50) NOT NULL,
    regdate DATE DEFAULT SYSDATE
);
```
그리고 `member21`테이블을 담을 때 사용할 `Member`클래스를 정의  
생성자를 정의하고 `get`, `set` 메서드를 자동 생성!  

그리고 password 일치하는지 검사하는 `matchPassword`메서드를 정의한다.  


```java
public class Member {
private String memberid;
private String name;
private String password;
private Date regdate;
public Member(String memberid, String name, String password, Date regdate) {
	this.memberid = memberid;
	this.name = name;
	this.password = password;
	this.regdate = regdate;
}
public String getMemberid() {
	return memberid;
}
public void setMemberid(String memberid) {
	this.memberid = memberid;
}
...
...
public boolean matchPassword(String pwd) {
	return password.equals(pwd);
}
```

Member를 DB에 INSERT, SELECT 하는 메서드가 있는 MemberDAO를 정의
```java
package board21.member.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Timestamp;
import java.util.Date;

import com.util.JdbcUtil;

import board21.member.model.Member;


public class MemberDao {
	public Member seelectById(Connection conn, String memberid) {
		PreparedStatement pstmt = null;
		ResultSet rs = null;
		try {
			pstmt = conn.prepareStatement("SELECT * FROM member21 WHERE memberid = ?");
			pstmt.setString(1, memberid);
			rs = pstmt.executeQuery();
			Member member = null;
			if (rs.next()) {
				member = new Member(
						rs.getString("memberid"),
						rs.getString("name"),
						rs.getString("password"),
						rs.getDate("regdate")
						);
				return member;
			}
		} catch (Exception e) {
			System.out.println(e);
		} finally {
			JdbcUtil.close(rs);
			JdbcUtil.close(pstmt);
		}
	}
	
	private Date toDate(Timestamp date){
		return date == null ? null : new Date(date.getTime());
	}
	public void insert(Connection conn, Member mem)	throws SQLException {
		try (PreparedStatement pstmt 
				= conn.prepareStatement("INSERT INTO (memberid, name, password) member21 value(?,?,?)");)
		{
			pstmt.setString(1, mem.getMemberid());
			pstmt.setString(2, mem.getName());
			pstmt.setString(3, mem.getPassword());
			
			pstmt.executeQuery();
		} catch (Exception e) {
			System.out.println(e);
		}
	}
}

```

joinHandler
받은 요청을 joinReq라는 객체에 저장
유효한지을 joinReq.validate 메서드를 통해 체크



 -> 

joinServiec
GET방식일땐 FORM으로 이동시키고
POST방식일때 INSERT시킴